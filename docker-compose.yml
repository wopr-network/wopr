services:
  wopr:
    build: .
    container_name: wopr
    restart: unless-stopped
    volumes:
      - wopr-data:/data
      - ~/.claude:/claude-creds
      - wopr-claude-sessions:/home/node/.claude
    environment:
      - WOPR_HOME=/data
      - WOPR_DAEMON_HOST=0.0.0.0
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    ports:
      - "7437:7437"

volumes:
  wopr-data:
  wopr-claude-sessions:
